# Query node 3 config for test cluster
[query]
max_active_sessions = 256

# API endpoints
admin_api_address = "0.0.0.0:8082"
metric_api_address = "0.0.0.0:7072"
flight_api_address = "127.0.0.1:9092"

# Handlers
mysql_handler_host = "0.0.0.0"
mysql_handler_port = 3309
http_handler_host = "0.0.0.0"
http_handler_port = 8002
clickhouse_http_handler_host = "0.0.0.0"
clickhouse_http_handler_port = 8126
flight_sql_handler_host = "0.0.0.0"
flight_sql_handler_port = 8902

tenant_id = "xp-test"
cluster_id = "test_cluster"
table_engine_memory_enabled = true

[[query.users]]
name = "root"
auth_type = "no_password"

[[query.users]]
name = "default"
auth_type = "no_password"

[log]
[log.stderr]
  on = false
[log.file]
  on = true
  level = "DEBUG"
  format = "text"
  dir = "_databend_data/logs/query3"

[log.query]
on = true

[meta]
# Connect to 3-node meta cluster
endpoints = ["127.0.0.1:9191", "127.0.0.1:9192", "127.0.0.1:9193"]
username = "root"
password = "root"
client_timeout_in_second = 60
auto_sync_interval = 60

[storage]
type = "fs"

[storage.fs]
data_path = "_databend_data/shared_storage"

[cache]
data_cache_storage = "disk"

[cache.disk]
path = "_databend_data/cache/query3"
max_bytes = 1073741824  # 1GB

[spill]
spill_local_disk_path = "_databend_data/spill/query3"
sort_spilling_disk_quota_ratio = 60
window_partition_spilling_disk_quota_ratio = 20
result_set_spilling_disk_quota_ratio = 10
