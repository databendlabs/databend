syntax = "proto3";
option go_package = "databend.com/cloudcontrol/proto";

package udfproto;

message UdfAsset {
  string location = 1;
  string url = 2;
  // Content tag for caching (e.g. etag or content length), independent of presigned URL.
  string tag = 3;
}

message ApplyUdfResourceRequest {
  // JSON runtime spec (code/handler/types/packages). Control plane builds Dockerfile.
  string spec = 1;
  repeated UdfAsset imports = 2;
}

message ApplyUdfResourceResponse {
  string endpoint = 1;
  map<string, string> headers = 2;
}

service UdfService {
  rpc ApplyUdfResource(ApplyUdfResourceRequest) returns (ApplyUdfResourceResponse);
}
