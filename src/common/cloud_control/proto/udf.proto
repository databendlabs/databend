syntax = "proto3";
option go_package = "databend.com/cloudcontrol/proto";

package udfproto;

message UdfAsset {
  string location = 1;
  string url = 2;
  // Content tag for caching (e.g. etag or content length), independent of presigned URL.
  string tag = 3;
}

message UdfRuntimeSpec {
  string language = 1;
  string handler = 2;
  repeated string input_types = 3;
  string result_type = 4;
  repeated string imports = 5;
  repeated string packages = 6;
  string runtime_version = 7;
  string code = 8;
}

message ApplyUdfResourceRequest {
  string type = 3;
  string script = 4;
}

message ApplyUdfResourceResponse {
  string endpoint = 1;
  map<string, string> headers = 2;
}

service UdfService {
  rpc ApplyUdfResource(ApplyUdfResourceRequest) returns (ApplyUdfResourceResponse);
}
