name: "Test Stateful Cluster Linux"
description: "Running stateful tests in cluster mode"
runs:
  using: "composite"
  steps:
    - uses: ./.github/actions/setup_test

    - uses: ./.github/actions/setup_minio
      with:
        data: true

    - name: Run Stateful Tests with Cluster mode
      shell: bash
      run: |
        ./scripts/ci/ci-run-stateful-tests-cluster-minio.sh

    - uses: wntrblm/nox@2025.05.01
    - name: Run nox test
      shell: bash
      run: nox -f tests/nox/noxfile.py -s test_suites -- suites/1_stateful
